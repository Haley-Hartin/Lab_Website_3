//- player-info.pug
include ../partials/header.pug
include ../partials/menu.pug

div.container
  br
  div.row
    div.col-4
      div.card
           //- TODO: Modify the pug code below to conditionally set the image_src
           //- let image_src = '../../resources/img/helmet.jpg'
           -if(p_data)
              -image_src= p_data.img_src
           -else
              -image_src = '../../resources/img/helmet.jpg'

      img.card-img-top#player_img(src= image_src, alt="Football Player")
      div.card-body.mx-auto
        form.form(action="/player_info/post", method="get")
          select.custom-select(name="player_choice", onchange="this.form.submit()")
            option(selected) Select Player
            -if(p_info)
               for val in p_info
                 option(val.id) #{val.name}
            //- TODO: Populate the select with player options. Set the value to the player's id and display the player's name.   

  div.col-8
      div.table-responsive
        table.table
    
                tr 
                  th Year
                  -if(p_data)
                     td #{p_data.year}
          
                tr
                  th Major
                  -if(p_data)
                     td #{p_data.major}
                tr
                  th Games Played
                  -if(p_games)
                     td #{p_games}
                tr
                  -if(p_data && p_games)
                     td Passing Yards: #{p_data.passing_yards}
                     td Avg. Passing Yards: #{p_data.passing_yards/ p_games}
                tr
                  -if(p_data && p_games)
                     td Rushing Yards: #{p_data.rushing_yards}
                     td Avg. Rushing Yards:#{p_data.rushing_yards/ p_games}
                tr
                  -if(player_data && player_games)
                     td Receiving Yards: #{p_data.receiving_yards}
                     td Avg. Receiving Yards:#{p_data.receiving_yards/ p_games}

include ../partials/footer.pug
